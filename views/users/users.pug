extends ../layout

block content
  h2 Users
  hr
  div.container
    div.content
      table.table.table-bordered#projects_table
        tbody
          if users
              each user in users
                div.panel.panel-default
                  div.panel-body
                    if user.profile.picture
                      img(src=user.profile.picture)
                    else
                      img(src=user.gravatar(60))
                    div.row
                      h4 #{user.profile.name || user.email || user.id}
                      h5 Roles: #{user.roles}
                    div.row
                      div.list-group.col-md-10.col-md-offset-1
                        a.list-group-item.admin_one
                          h4 Revoke Administrator Rights
                          p No one needs these!  
                        div.list-group-item.admin_two(style="display:none;")
                            h4 Revoke Administrator Rights for #{user.profile.name}?
                            a.button.btn.btn-danger.confirm
                              | Revoke
                            a.button.btn.btn-default.cancel
                              | Cancel
                        a.list-group-item.deactivate_one
                          h4 Deactivate User
                          p Get rid of this guy!
                        div.list-group-item.deactivate_two(style="display:none;")
                            h4 Deactivate User #{user.profile.name}?
                            a.button.btn.btn-danger.confirm
                              | Revoke
                            a.button.btn.btn-default.cancel
                              | Cancel
                        a.list-group-item.delete_one
                          h4 Permanently Delete User
                          p Get rid of this guy forever!
                        div.list-group-item.delete_two(style="display:none;")
                            h4 Delete User #{user.profile.name}?
                            a.button.btn.btn-danger.confirm
                              | Revoke
                            a.button.btn.btn-default.cancel
                              | Cancel

                    
                      
                      
                    
                    
                
    
                      
                      
                      
                  
                  
                    case user.roles.indexOf('admin')
                      when -1
                        a.button.btn.btn-block.btn-info(type='submit' data-user=user.email).make_admin
                          i.fa.fa-wrench
                          | Make Admin                         
                      default
                        a.button.btn.btn-block.btn-warning(type='submit' data-user=user.email).revoke_admin
                          i.fa.fa-close
                          | Revoke Admin
                    a.button.btn.btn-block.btn-info(type='submit' data-user=user.email).deactivate_user
                      i.fa.fa-times-circle-o
                      | Deactivate
                    a.button.btn.btn-block.btn-danger(type='submit' data-user=user.email data-toggle='modal' data-target='.delete-user-modal')
                      i.fa.fa-times-circle-o
                      | Delete                     
                  

